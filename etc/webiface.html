.\"
.\"	aegis - project change supervisor
.\"	Copyright (C) 2002, 2003 Peter Miller;
.\"	All rights reserved.
.\"
.\"	This program is free software; you can redistribute it and/or modify
.\"	it under the terms of the GNU General Public License as published by
.\"	the Free Software Foundation; either version 2 of the License, or
.\"	(at your option) any later version.
.\"
.\"	This program is distributed in the hope that it will be useful,
.\"	but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"	GNU General Public License for more details.
.\"
.\"	You should have received a copy of the GNU General Public License
.\"	along with this program; if not, write to the Free Software
.\"	Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111, USA.
.\"
.\" MANIFEST: input for archive/webiface.html
.\"
.de an-p-footer
..
.ad l
.hy 0
.so version.so
<html>
<head><title>Aegis Web Interface</title></head>
<body bgcolor="#ffffff"><h1>
<img src="aegis.png" align=left>
<img src="aegis.png" align=right>
<center>Aegis \*(v)<br>Web Interface</center></h1>
Aegis has a read-only web interface to its database.  The page uses Aegis'
own web interface to look at Aegis' own development (because Aegis is
developed using Aegis).  If you have Apache installed when Aegis is
configured and built, this interface (to your projects, not this one)
will be installed for you at your site, too.
.br
<p>
The <a
.br
href="/cgi-bin/aegis.cgi?">
top-level view</a>
is of all projects being managed by Aegis.
You can drill down to everything else from this point.
.br
<p>
The <a
.br
href="/cgi-bin/aegis.cgi?file@proj_menu+project@aegis.\*(v)">
project</a> page.  Every project (and each branch) has one.  In this
case you will be taken to the one for Aegis \*(v).
.br
<p>
The <a
.br
href="/cgi-bin/aegis.cgi?file@proj_hstry+project@aegis.\*(v)">
completed changes</a>
page lists all of the completed changes to date (on the development branch).
This is the bleeding edge.
The <i>Download</i> links are only of interest to Aegis developers, but
they demonstrate <i>how</i> an Internet project (or a global VPN project)
could distribute change sets.  Click on the change number for more
information about each change.
.br
</table>
.br
<hr>
<h2 align=center> SourceForge </h2>
Is your project hosted at sourceforge?  If so, there is no need for you
to compile Aegis to run on SourceForge, because it is already there.
If you send email to <a href="mailto:millerp@canb.auug.org.au">Peter Miller</a>
he will add a project pointer and your project will appear in the
<a href="/cgi-bin/aegis.cgi?">list of projects</a>.
<p>
You will need to <a href="#num7">upload your project tree</a>, as
mentioned in the instructions below.
.br
<hr>
<h2 align=center> SourceForge Hack </h2>
.br
This section contains instructions for building and installing the CGI
script that runs at <tt>sourceforge.net</tt>.  If you want an externally
accessable server, but outside you firewall, this is how to do it.
You then update the external tree using <i>rsync</i> or similar, either
weekly or at integrate pass, or something.
.br
<p>
Using the Aegis web interface on SourceForge is a little different than
at your own site, due to the chroot jail that is used.  (Change these
instructions to suit the name of your project.)  You wont be able to
compile on SourceForge, so on a linux PC elsewhere
<ol>
<li>
Configure with <i>./configure --prefix=/home/groups/a/ae/aegis
--with-no-aegis-configured</i>
<li>
Edit the generated Makefile, and add -DSOURCE_FORGE_HACK to the CFLAGS
variable.
<li>
Now you can <i>make</i> as normal.
<li>
You can use the RPM_BUILD_ROOT setting of the Makefile, or you can
<i>mkdir -p /home/groups/a/ae/aegis/cgi-bin</i>
<li>
When you <i>make install</i>, you will then need to cull the install
tree of unneccessary files.
You only need
<i>bin/aedist</i>,
<i>bin/aegis</i>,
<i>bin/aepatch</i>,
<i>bin/aerect</i>,
<i>bin/aereport</i>,
<i>bin/aetar</i>,
<i>bin/ae_diff2htm</i>,
<i>bin/aegis.cgi</i>, and the
<i>share/en/html</i> tree.
The rest can be removed.
<blockquote>
.nf
<pre>cd /home/groups/a/ae/aegis
mv bin/aegis.cgi cgi-bin
rm bin/aeannotate bin/aebuffy bin/aecomp bin/aecomplete
rm bin/ae_diff2htm bin/aefind bin/aegis.cgi.i bin/aeimport
rm bin/aeintegratq bin/aels bin/ae-sccs-put bin/aesub
rm bin/aemeasure
rm bin/tkaeca bin/tkaegis bin/tkaenc bin/tkaepa bin/tkaer bin/xaegis
rm -r com lib man
mkdir -p share-new/en
mv share/en/html share-new/en
rm -r share
mv share-new share</pre>
.fi
</blockquote>
<li>
Make a tarball, <i>scp</i> it to SourceForge, unpack at the other end.
<li>
<a name="num7">Now upload your project.</a>
I use <i>rsync</i> for efficient differential
uploads.  The directory needs to be inside the chroot jail, but outside
the <i>htdocs</i> directory.
The instructions assume it is in the
<tt >/home/groups/<i >p</i>/<i >pr</i>/<i >project</i>/<i >project</i></tt>
directory.
You need the whole project tree, but you can leave out derived files
in the baselines (<i>e.g.</i> <tt>.o</tt> files, <tt>.a</tt> files and
executables).
<li>
Edit <tt >/home/groups/<i >p</i>/<i >pr</i>/<i >project</i>/com/aegis/state</tt>
to point at the project tree.
Something like <blockquote>
<pre>where =
.nf
[
  {
    project_name = "<i>project</i>";
    directory = "/home/groups/<i >p</i>/<i >pr</i>/<i >project</i>/<i
    >project</i>";
  },
.fi
];</pre></blockquote>
<li>
You will need to create a <tt >/home/groups/<i >p</i>/<i >pr</i>/<i
>project</i>/lib/aegis/aegis.cgi.conf</tt> file, and use it to the the PATH
<blockquote><pre >PATH=${PATH}:/home/groups/<i >p</i>/<i >pr</i>/<i
>project</i >/bin</pre ></blockquote>
environment variable, so that <tt>aegis.cgi</tt> can find necessary commands.
</ol>
If this takes off, I'll ask the SourceForge people to install it, so
that most of these instructions are unnecessary.
</body></html>
