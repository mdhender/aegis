#
#	aegis - project change supervisor
#	This file is in the Public Domain 2004 Peter Miller
#
# This is an example makefile for use when importing existing projexcts
# into Aegis.  Note that it assumes you are using GNU Automake and GNU
# Autoconf.  If you are not, this file is not use to you.
#

#
# Try to include the Makefile generated by ./configure If it exists, its
# contents will be used.  If it does not exist, GNU Make will try to
# build it, and then restart.
#
include Makefile

#
# Makefiles generated by GNU Automake define the "srcdir" macro right at
# the start.  If this macro has NOT been defined, it means the Makefile
# does not yet exist, and it needs to be constructed.
#
ifndef srcdir

bogus-default-target: Makefile
	$(MAKE) $(MAKECMDGOALS)

#
# Thsi is how to generate the Makefile and the config.h file.
#
Makefile: configure Makefile.in config.h.in
	rm -f config.cache
	./configure

#
# This is how to build the ./configure script.
#
configure: configure.ac config.h.in Makefile.in
	autoconf

#
# If your project needs any of those extra files you need to add them to
# this rule.  Only uncomment the dependencies you know you need.
#
#configure: aclocal.m4
#configure: install-sh missing mkinstalldir

#
# There are two different, but equally common, ways of creating the
# config.h.in file.  Select the one you need.  Note that some projets
# don't use config.h at all, and so you comment out both.
#
config.h.in: configure.ac aclocal.m4
	autoheader
#config.h.in: configure.ac aclocal.m4 acconfig.h
#	autoheader acconfig.h

#
# Only use this rule if the project uses GNU Automake.
#
Makefile.in: Makefile.am configure.ac config.h.in
	automake

aclocal.m4: configure.ac
	aclocal

#
# The following rules apply ONLY if your ./configure script needs them.
# See the configure rule, above.
#
AUTOMAKE_DIR=/usr/share/automake-1.7

install-sh: $(AUTOMAKE_DIR)/install-sh
	cp $^ $@

missing: $(AUTOMAKE_DIR)/missing
	cp $^ $@

mkinstalldirs: $(AUTOMAKE_DIR)/mkinstalldirs
	cp $^ $@
endif
